

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>humancompatible.glance.iterative_merges package &mdash; HumanCompatible.Explain  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            HumanCompatible.Explain
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="facts.html">FACTS: Fairness Aware Counterfactual for Subgrouos package</a></li>
<li class="toctree-l1"><a class="reference internal" href="glance.html">GLANCE: Global Actions in a Nutshell for Counterfactual Explainability</a></li>
<li class="toctree-l1"><a class="reference internal" href="fcx.html">FCX: Finding Feasible Counterfactual Explanation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HumanCompatible.Explain</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">humancompatible.glance.iterative_merges package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/glance.iterative_merges.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="humancompatible-glance-iterative-merges-package">
<h1>humancompatible.glance.iterative_merges package<a class="headerlink" href="#humancompatible-glance-iterative-merges-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="humancompatible-explain-glance-iterative-merges-iterative-merges-module">
<h2>humancompatible.explain.glance.iterative_merges.iterative_merges module<a class="headerlink" href="#humancompatible-explain-glance-iterative-merges-iterative-merges-module" title="Link to this heading"></a></h2>
<dl class="py class" id="module-humancompatible.explain.glance.iterative_merges.iterative_merges">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">C_GLANCE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_clusters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_clusters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_local_counterfactuals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heuristic_weights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(0.5,</span> <span class="pre">0.5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alternative_merges</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">13</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#C_GLANCE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalCounterfactualMethod</span></code></p>
<p>A class for generating global counterfactual explanations using an iterative merging approach.</p>
<p>It allows the user to control the number of clusters and the methods used
for clustering and generating counterfactuals.</p>
<section id="attributes">
<h3>Attributes:<a class="headerlink" href="#attributes" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model<span class="classifier">Any</span></dt><dd><p>The predictive model used for generating counterfactuals.</p>
</dd>
<dt>initial_clusters<span class="classifier">int</span></dt><dd><p>The initial number of clusters to form.</p>
</dd>
<dt>final_clusters<span class="classifier">int</span></dt><dd><p>The target number of clusters after merging.</p>
</dd>
<dt>num_local_counterfactuals<span class="classifier">int</span></dt><dd><p>The number of local counterfactuals to generate for each cluster.</p>
</dd>
<dt>heuristic_weights<span class="classifier">Tuple[float, float]</span></dt><dd><p>Weights used in the heuristic for merging clusters.</p>
</dd>
<dt>alternative_merges<span class="classifier">bool</span></dt><dd><p>If True, allows alternative merging strategies.</p>
</dd>
<dt>random_seed<span class="classifier">int</span></dt><dd><p>Seed for random number generation.</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>If True, enables verbose output during processing.</p>
</dd>
<dt>final_clustering<span class="classifier">Optional[Dict[int, pd.DataFrame]]</span></dt><dd><p>The final clustering of instances after merging.</p>
</dd>
<dt>cluster_results<span class="classifier">Optional[Dict[int, Dict[str, Any]]]</span></dt><dd><p>Results of the clustering including effectiveness and cost metrics.</p>
</dd>
</dl>
</section>
<section id="methods">
<h3>Methods:<a class="headerlink" href="#methods" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>_set_features_names(X, numerical_names, categorical_names):</dt><dd><p>Sets the feature names for numerical and categorical features.</p>
</dd>
<dt>fit(X, y, train_dataset, feat_to_vary, numeric_features_names, categorical_features_names,</dt><dd><p>clustering_method, cf_generator, cluster_action_choice_algo, …)
Fits the clustering and counterfactual generation model to the provided dataset.</p>
</dd>
<dt>explain_group(instances):</dt><dd><p>Explains the group of instances by generating counterfactuals based on clustering.</p>
</dd>
<dt>global_actions():</dt><dd><p>Retrieves the global actions derived from the clustered results.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.explain_group">
<span class="sig-name descname"><span class="pre">explain_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#C_GLANCE.explain_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.explain_group" title="Link to this definition"></a></dt>
<dd><p>Explains the group of instances by generating counterfactuals based on clustering.</p>
<section id="parameters">
<h4>Parameters:<a class="headerlink" href="#parameters" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>instances<span class="classifier">pd.DataFrame</span></dt><dd><p>The group of instances to explain.</p>
</dd>
</dl>
</section>
<section id="returns">
<h4>Returns:<a class="headerlink" href="#returns" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>Tuple[int, float]</dt><dd><p>A tuple containing the total effectiveness and total cost of the generated counterfactuals.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feat_to_vary</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clustering_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ClusteringMethod</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'KMeans'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'KMeans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cf_generator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LocalCounterfactualMethod</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'Dice'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'NearestNeighbors'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'RandomSampling'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Dice'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_action_choice_algo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'max-eff'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'mean-act'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'low-cost'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'max-eff'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nns__n_scalars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rs__n_most_important</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rs__n_categorical_most_frequent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowcost__action_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowcost__num_low_cost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_cost_eff_thres__effectiveness_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_cost_eff_thres_combinations__num_min_cost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eff_thres_hybrid__max_n_actions_full_combinations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE" title="humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE"><span class="pre">C_GLANCE</span></a></span></span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#C_GLANCE.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.fit" title="Link to this definition"></a></dt>
<dd><p>Fits the clustering and counterfactual generation model to the provided dataset.</p>
<section id="id1">
<h4>Parameters:<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>X<span class="classifier">pd.DataFrame</span></dt><dd><p>Features of the dataset.</p>
</dd>
<dt>y<span class="classifier">pd.Series</span></dt><dd><p>Target variable.</p>
</dd>
<dt>train_dataset<span class="classifier">pd.DataFrame</span></dt><dd><p>The training dataset used for local counterfactual generation methods.</p>
</dd>
<dt>feat_to_vary<span class="classifier">Optional[Union[List[str], str]], optional</span></dt><dd><p>Features to vary in counterfactual generation. Default is “all”.</p>
</dd>
<dt>numeric_features_names<span class="classifier">Optional[List[str]], optional</span></dt><dd><p>List of numeric feature names. If None, they will be inferred from X.</p>
</dd>
<dt>categorical_features_names<span class="classifier">Optional[List[str]], optional</span></dt><dd><p>List of categorical feature names. If None, they will be inferred from X.</p>
</dd>
<dt>clustering_method<span class="classifier">Union[ClusteringMethod, Literal[“KMeans”]], optional</span></dt><dd><p>The clustering method to use. Default is “KMeans”.</p>
</dd>
<dt>cf_generator<span class="classifier">Union[LocalCounterfactualMethod, Literal[“Dice”, “NearestNeighbors”, “RandomSampling”]], optional</span></dt><dd><p>The local counterfactual generation method to use. Default is “Dice”.</p>
</dd>
<dt>cluster_action_choice_algo<span class="classifier">Literal[“max-eff”, “mean-act”, “low-cost””], optional</span></dt><dd><p>The algorithm for selecting actions from clusters. Default is “max-eff”.</p>
</dd>
<dt>nns__n_scalars<span class="classifier">Optional[int], optional</span></dt><dd><p>Number of scalar features to use for nearest neighbors. Default is None.</p>
</dd>
<dt>rs__n_most_important<span class="classifier">Optional[int], optional</span></dt><dd><p>Number of most important features for random sampling. Default is None.</p>
</dd>
<dt>rs__n_categorical_most_frequent<span class="classifier">Optional[int], optional</span></dt><dd><p>Number of most frequent categorical features for random sampling. Default is None.</p>
</dd>
<dt>lowcost__action_threshold<span class="classifier">Optional[int], optional</span></dt><dd><p>Action threshold for low-cost methods. Default is None.</p>
</dd>
<dt>lowcost__num_low_cost<span class="classifier">Optional[int], optional</span></dt><dd><p>Number of low-cost actions to consider. Default is None.</p>
</dd>
<dt>min_cost_eff_thres__effectiveness_threshold<span class="classifier">Optional[float], optional</span></dt><dd><p>Effectiveness threshold for minimum cost methods. Default is None.</p>
</dd>
<dt>min_cost_eff_thres_combinations__num_min_cost<span class="classifier">Optional[int], optional</span></dt><dd><p>Number of minimum cost combinations to evaluate. Default is None.</p>
</dd>
<dt>eff_thres_hybrid__max_n_actions_full_combinations<span class="classifier">Optional[int], optional</span></dt><dd><p>Maximum number of actions for full combinations in hybrid thresholding. Default is None.</p>
</dd>
</dl>
</section>
<section id="id2">
<h4>Returns:<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>IterativeMerges</dt><dd><p>Returns the fitted instance of IterativeMerges.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.global_actions">
<span class="sig-name descname"><span class="pre">global_actions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#C_GLANCE.global_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.C_GLANCE.global_actions" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.action_fake_cost">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">action_fake_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numerical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#action_fake_cost"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.action_fake_cost" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.actions_cumulative_eff_cost">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">actions_cumulative_eff_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions_with_costs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Series</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_func_dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Series</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numerical_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_no_action_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#actions_cumulative_eff_cost"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.actions_cumulative_eff_cost" title="Link to this definition"></a></dt>
<dd><p>Evaluates the cumulative effectiveness and cost of applying a sequence of actions
to a dataset using a predictive model.</p>
<p>This function applies each action from the sorted list of actions with their costs,
predicts the outcomes, and calculates the total number of predictions that were flipped
as well as the total recourse cost incurred from the actions.</p>
<section id="id3">
<h3>Parameters:<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model<span class="classifier">Any</span></dt><dd><p>A machine learning model used for making predictions on the modified instances.</p>
</dd>
<dt>X<span class="classifier">pd.DataFrame</span></dt><dd><p>The original DataFrame of instances to which actions will be applied.</p>
</dd>
<dt>actions_with_costs<span class="classifier">List[Tuple[pd.Series, float]]</span></dt><dd><p>A list of tuples where each tuple contains:
- A pandas Series representing the action to apply.
- A float representing the cost associated with the action.</p>
</dd>
<dt>dist_func_dataframe<span class="classifier">Callable[[pd.DataFrame, pd.DataFrame], pd.Series]</span></dt><dd><p>A function that computes the distance or cost between two DataFrames.</p>
</dd>
<dt>numerical_columns<span class="classifier">List[str]</span></dt><dd><p>A list of names for the numerical columns in the DataFrame.</p>
</dd>
<dt>categorical_columns<span class="classifier">List[str]</span></dt><dd><p>A list of names for the categorical columns in the DataFrame.</p>
</dd>
<dt>categorical_no_action_token<span class="classifier">Any</span></dt><dd><p>A token used to represent the absence of an action for categorical features.</p>
</dd>
</dl>
</section>
<section id="id4">
<h3>Returns:<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>Tuple[float, float]</dt><dd><p>A tuple containing:
- The total number of predictions flipped across all actions applied.
- The total recourse cost incurred from applying the actions.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.cluster_results">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">cluster_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instances</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clusters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_expl_actions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_func_dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Series</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numerical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_action_choice_algo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'max-eff'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'mean-act'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'low-cost'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'min-cost-eff-thres'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'eff-thres-hybrid'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'max-eff'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_low_cost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">effectiveness_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_min_cost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_n_actions_full_combinations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#cluster_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.cluster_results" title="Link to this definition"></a></dt>
<dd><p>Evaluates and selects actions for each cluster based on a specified action choice algorithm.</p>
<p>This function iterates through each cluster of instances, applying the specified algorithm to
select the best action for achieving recourse while minimizing costs. It calculates the total
effectiveness and mean recourse costs across all clusters.</p>
<section id="id5">
<h3>Parameters:<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model<span class="classifier">Any</span></dt><dd><p>A machine learning model used for making predictions on modified instances.</p>
</dd>
<dt>instances<span class="classifier">pd.DataFrame</span></dt><dd><p>The DataFrame of original instances to which actions will be applied.</p>
</dd>
<dt>clusters<span class="classifier">Dict[int, pd.DataFrame]</span></dt><dd><p>A dictionary mapping cluster IDs to DataFrames of instances belonging to each cluster.</p>
</dd>
<dt>cluster_expl_actions<span class="classifier">Dict[int, pd.DataFrame]</span></dt><dd><p>A dictionary mapping cluster IDs to DataFrames of candidate actions for each cluster.</p>
</dd>
<dt>dist_func_dataframe<span class="classifier">Callable[[pd.DataFrame, pd.DataFrame], pd.Series]</span></dt><dd><p>A function that computes the distance or cost between two DataFrames.</p>
</dd>
<dt>numerical_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for the numerical columns in the DataFrames.</p>
</dd>
<dt>categorical_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for the categorical columns in the DataFrames.</p>
</dd>
<dt>cluster_action_choice_algo<span class="classifier">Literal[“max-eff”, “mean-act”, “low-cost”, “min-cost-eff-thres”, “eff-thres-hybrid”]</span></dt><dd><p>The algorithm to use for selecting actions from candidate actions. Options include:
- “max-eff”: Select the action with maximum effectiveness.
- “mean-act”: Select the mean action from candidate actions.
- “low-cost”: Select actions based on low cost.</p>
</dd>
<dt>action_threshold<span class="classifier">int</span></dt><dd><p>Minimum threshold for the number of flipped predictions required to consider an action effective.</p>
</dd>
<dt>num_low_cost<span class="classifier">int</span></dt><dd><p>The number of low-cost actions to consider (used when the low-cost algorithm is selected).</p>
</dd>
<dt>effectiveness_threshold<span class="classifier">float</span></dt><dd><p>Minimum effectiveness required for actions (used when the min-cost-eff-thres algorithm is selected).</p>
</dd>
<dt>num_min_cost<span class="classifier">Optional[int]</span></dt><dd><p>Number of minimum cost actions to consider (used when the min-cost-eff-thres algorithm is selected).</p>
</dd>
<dt>max_n_actions_full_combinations<span class="classifier">int</span></dt><dd><p>Maximum number of actions to evaluate in full combinations (not currently used in the function).</p>
</dd>
</dl>
</section>
<section id="id6">
<h3>Returns:<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>Tuple[Dict[int, Dict[str, Any]], float, float]</dt><dd><p>A tuple containing:
- A dictionary where each key is a cluster ID and each value is another dictionary with the selected action, its effectiveness, and cost.
- Total effectiveness percentage across all clusters.
- Total mean recourse cost across all clusters.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.cumulative">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">cumulative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instances</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_func_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_features_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_features_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_no_action_token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#cumulative"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.cumulative" title="Link to this definition"></a></dt>
<dd><p>Computes the cumulative effectiveness and cost of applying a set of actions
to a given set of instances using a predictive model.</p>
<section id="id7">
<h3>Parameters:<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>model<span class="classifier">Any</span></dt><dd><p>A predictive model with a predict method. This model will be used to predict
outcomes after applying actions to the input instances.</p>
</dd>
<dt>instances<span class="classifier">pd.DataFrame</span></dt><dd><p>A DataFrame containing the instances for which actions are to be applied.</p>
</dd>
<dt>actions<span class="classifier">List[dict]</span></dt><dd><p>A list of actions, where each action is represented as a dictionary that
specifies how to modify the instances.</p>
</dd>
<dt>dist_func_dataframe<span class="classifier">Callable[[pd.DataFrame, pd.DataFrame], pd.Series]</span></dt><dd><p>A distance function that takes two DataFrames and returns a Series of distances
between corresponding rows.</p>
</dd>
<dt>numeric_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for the numeric features in the instances DataFrame.</p>
</dd>
<dt>categorical_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for the categorical features in the instances DataFrame.</p>
</dd>
<dt>categorical_no_action_token<span class="classifier">Any</span></dt><dd><p>A token used to represent a no-action state for categorical features.</p>
</dd>
</dl>
</section>
<section id="id8">
<h3>Returns:<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<dl>
<dt>Tuple[int, float]</dt><dd><p>A tuple containing:
- effectiveness: An integer count of how many actions were effective (i.e.,</p>
<blockquote>
<div><p>resulted in a finite cost).</p>
</div></blockquote>
<ul class="simple">
<li><p>cost: A float representing the total cost incurred by the effective actions.</p></li>
</ul>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.format_glance_output">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">format_glance_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Number</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#format_glance_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.format_glance_output" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.iterative_merges.print_results">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.iterative_merges.</span></span><span class="sig-name descname"><span class="pre">print_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clusters_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Number</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_effectiveness</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_cost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/iterative_merges.html#print_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.iterative_merges.print_results" title="Link to this definition"></a></dt>
<dd><p>Prints the statistics for each cluster, including effectiveness and cost.</p>
<p>This function takes the results of cluster analysis and formats them for easy
viewing. It displays the size of each cluster, the actions taken, and the
effectiveness and cost of those actions.</p>
<section id="id9">
<h3>Parameters:<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<dl>
<dt>clusters_stats<span class="classifier">Dict[int, Dict[str, numbers.Number]]</span></dt><dd><p>A dictionary where keys are cluster IDs (integers) and values are
dictionaries containing statistics for each cluster. Each value dictionary
must contain the following keys:</p>
<blockquote>
<div><ul class="simple">
<li><p>“size”: The size of the cluster.</p></li>
<li><p>“action”: The actions taken for the cluster.</p></li>
<li><p>“effectiveness”: The effectiveness of the actions in the cluster.</p></li>
<li><p>“cost”: The cost associated with the actions.</p></li>
</ul>
</div></blockquote>
</dd>
<dt>total_effectiveness<span class="classifier">float</span></dt><dd><p>The total effectiveness percentage across all clusters, represented as a decimal
(e.g., 0.75 for 75%).</p>
</dd>
<dt>total_cost<span class="classifier">float</span></dt><dd><p>The total cost associated with the actions taken across all clusters.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="humancompatible-explain-glance-iterative-merges-phase2-module">
<h2>humancompatible.explain.glance.iterative_merges.phase2 module<a class="headerlink" href="#humancompatible-explain-glance-iterative-merges-phase2-module" title="Link to this heading"></a></h2>
<dl class="py function" id="module-humancompatible.explain.glance.iterative_merges.phase2">
<dt class="sig sig-object py" id="humancompatible.explain.glance.iterative_merges.phase2.generate_cluster_centroid_explanations">
<span class="sig-prename descclassname"><span class="pre">humancompatible.explain.glance.iterative_merges.phase2.</span></span><span class="sig-name descname"><span class="pre">generate_cluster_centroid_explanations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_centroids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cf_generator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LocalCounterfactualMethod</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_local_counterfactuals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numerical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_features_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/humancompatible/explain/glance/iterative_merges/phase2.html#generate_cluster_centroid_explanations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#humancompatible.explain.glance.iterative_merges.phase2.generate_cluster_centroid_explanations" title="Link to this definition"></a></dt>
<dd><p>Generates explanations for cluster centroids by creating counterfactual instances
for each centroid and extracting corresponding actions and explanations.</p>
<section id="id10">
<h3>Parameters:<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>cluster_centroids<span class="classifier">Dict[int, pd.DataFrame]</span></dt><dd><p>A dictionary where keys are cluster identifiers and values are DataFrames
representing the centroids of each cluster.</p>
</dd>
<dt>cf_generator<span class="classifier">LocalCounterfactualMethod</span></dt><dd><p>An instance of a LocalCounterfactualMethod used to generate counterfactuals.</p>
</dd>
<dt>num_local_counterfactuals<span class="classifier">int</span></dt><dd><p>The number of counterfactuals to generate for each cluster centroid.</p>
</dd>
<dt>numerical_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for numerical features in the dataset.</p>
</dd>
<dt>categorical_features_names<span class="classifier">List[str]</span></dt><dd><p>A list of names for categorical features in the dataset.</p>
</dd>
</dl>
</section>
<section id="id11">
<h3>Returns:<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>Tuple[Dict[int, pd.DataFrame], Dict[int, pd.DataFrame], Dict[int, pd.DataFrame]]</dt><dd><p>A tuple containing three dictionaries:
- cluster_explanations: A dictionary of counterfactuals for each cluster centroid.
- cluster_expl_actions: A dictionary of extracted actions for the generated counterfactuals.
- explanations_centroid: A dictionary of centroid explanations based on the generated counterfactuals.</p>
</dd>
</dl>
</section>
<section id="raises">
<h3>Raises:<a class="headerlink" href="#raises" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>ValueError</dt><dd><p>If no counterfactuals are found for any of the centroids.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-humancompatible.explain.glance.iterative_merges">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-humancompatible.explain.glance.iterative_merges" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, AutoFair Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>